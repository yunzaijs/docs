"use strict";(self.webpackChunkyunzaijs_website=self.webpackChunkyunzaijs_website||[]).push([[1043],{7555:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>p});var s=t(4848),o=t(8453);const r={sidebar_position:1},i="\u5468\u671f",a={id:"b-next/dev-docs/life-cycle",title:"\u5468\u671f",description:"\u6307\u4e00\u4e2a\u63d2\u4ef6\u4ece\u5f00\u59cb\u5230\u7ed3\u675f\u8fc7\u7a0b\u4e2d\u4f1a\u6267\u884c\u7684\u51fd\u6570",source:"@site/docs/b-next/dev-docs/1-life-cycle.md",sourceDirName:"b-next/dev-docs",slug:"/b-next/dev-docs/life-cycle",permalink:"/docs/docs/b-next/dev-docs/life-cycle",draft:!1,unlisted:!1,editUrl:"https://github.com/yunzaijs/docs/tree/main/docs/b-next/dev-docs/1-life-cycle.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"\u5f00\u59cb",permalink:"/docs/docs/b-next/dev-docs/start"},next:{title:"\u6a21\u5757",permalink:"/docs/docs/b-next/dev-docs/new-features"}},c={},p=[{value:"create",id:"create",level:2},{value:"mounted",id:"mounted",level:2},{value:"beforeMount",id:"beforemount",level:2},{value:"response",id:"response",level:2},{value:"afterResponse",id:"afterresponse",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u5468\u671f",children:"\u5468\u671f"})}),"\n",(0,s.jsx)(n.admonition,{title:"\u63d0\u793a",type:"tip",children:(0,s.jsx)(n.p,{children:"\u6307\u4e00\u4e2a\u63d2\u4ef6\u4ece\u5f00\u59cb\u5230\u7ed3\u675f\u8fc7\u7a0b\u4e2d\u4f1a\u6267\u884c\u7684\u51fd\u6570"})}),"\n",(0,s.jsx)(n.h2,{id:"create",children:"create"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { applicationOptions, useAppStorage } from 'yunzaijs'\nexport default () => {\n  return applicationOptions({\n    // \u63d2\u4ef6\u521b\u5efa\u65f6\n    create() {\n      // \u6240\u6709\u521d\u59cb\u5316\u884c\u4e3a\u90fd\u5e94\u8be5\u5728\u6b64\u5904\u8fdb\u884c\n      // \u8bf7\u907f\u514d\u4f7f\u7528 await\u9020\u6210\u963b\u585e\n    }\n  })\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"mounted",children:"mounted"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { Application, applicationOptions, useEvent } from 'yunzaijs'\nimport * as Apps from './apps.js'\nexport default () => {\n  // \u9884\u5148\u5b58\u50a8\n  const Rules: {\n    reg: RegExp | string\n    key: string\n  }[] = []\n  // options\n  return applicationOptions({\n    create() {\n      // created\n      for (const key in Apps) {\n        // \u63a8\u7c7b\u578b\n        const app: typeof Application.prototype = new Apps[key]()\n        // \u7528  reg \u548c key \u8fde\u63a5\u8d77\u6765\u3002\n        // \u4e5f\u53ef\u4ee5\u8fdb\u884c\u81ea\u7531\u6392\u5e8f\n        for (const rule of app.rule) {\n          Rules.push({\n            reg: rule.reg,\n            key: key\n          })\n        }\n      }\n    },\n    async mounted(e) {\n      // \u5b58\u50a8\n      const Data = []\n      // \u5982\u679ckey\u4e0d\u5b58\u5728\n      const Cache = {}\n      // \u4f7f\u7528event\u4ee5\u786e\u4fdd\u5f97\u5230\u6b63\u5e38\u7c7b\u578b\n      await useEvent(\n        e => {\n          for (const Item of Rules) {\n            // \u5339\u914d\u6b63\u5219\n            // \u5b58\u5728key\n            // \u7b2c\u4e00\u6b21new\n            if (new RegExp(Item.reg).test(e.msg) && Apps[Item.key] && !Cache[Item.key]) {\n              Cache[Item.key] = true\n              Data.push(new Apps[Item.key]())\n            }\n          }\n        },\n        // \u63a8\u5012\u4e3amessage\u7c7b\u578b\u7684event\n        [e, 'message']\n      )\n      // back\n      return Data\n    }\n  })\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"beforemount",children:"beforeMount"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { applicationOptions, useAppStorage } from 'yunzaijs'\nexport default () => {\n  return applicationOptions({\n    // \u88ab\u6267\u884c\u4e4b\u524d\uff0c\u4e5f\u662f\u88ab\u6240\u6709\u4e2d\u95f4\u4ef6\u6267\u884c\u4e4b\u524d\n    // \u53cd\u4e4b\uff0cmounted \u662f\u4e2d\u95f4\u4ef6\u6267\u884c\u4e4b\u540e\n    beforeMount(e) {\n      //\n    }\n  })\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"response",children:"response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { applicationOptions, useAppStorage } from 'yunzaijs'\nexport default () => {\n  return applicationOptions({\n    response() {\n      // \u6307\u4ee4\u88ab\u54cd\u5e94\u4e4b\u540e\n      // \u53ef\u4ee5\u9009\u62e9\u6253\u5370 \u88ab\u6267\u884c\u7684\u662f\u8c01\n    }\n  })\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"afterresponse",children:"afterResponse"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { applicationOptions, useAppStorage } from 'yunzaijs'\nexport default () => {\n  return applicationOptions({\n    response() {\n      // \u6240\u6709\u6307\u4ee4\u54cd\u5e94\u5b8c\u6210\u4e4b\u540e\n    }\n  })\n}\n"})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var s=t(6540);const o={},r=s.createContext(o);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);